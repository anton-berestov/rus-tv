<template>
	<div class="welcome-page">
		<div class="hero-section">
			<div class="hero-content">
				<h1>RusTV - –†–æ—Å—Å–∏–π—Å–∫–æ–µ —Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ –æ–Ω–ª–∞–π–Ω</h1>
				<p class="subtitle">
					–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –≤ –º–∏—Ä —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏—è. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å
					–ª—é–±–∏–º—ã–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∞–º–∏ –≤ HD-–∫–∞—á–µ—Å—Ç–≤–µ –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏ –º–∏—Ä–∞!
				</p>
				<router-link to="/register" class="hero-cta"
					>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</router-link
				>
				<p class="trial-note">7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤</p>
			</div>
			<div class="hero-image">
				<div class="tv-frame">
					<div class="tv-screen">
						<div class="tv-content">
							<div class="channel channel-1">
								<div class="channel-logo">
									<span class="logo-text">–ü–µ—Ä–≤—ã–π</span>
								</div>
								<div class="program-info">
									<div class="program-title">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</div>
								</div>
								<div class="channel-preview">
									<video
										autoplay
										muted
										playsinline
										ref="firstChannelVideo"
										class="preview-video"
										crossorigin="anonymous"
									></video>
								</div>
							</div>
							<div class="channel channel-2">
								<div class="channel-logo">
									<span class="logo-text">–†–æ—Å—Å–∏—è 1</span>
								</div>
								<div class="program-info">
									<div class="program-title">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</div>
								</div>
								<div class="channel-preview">
									<video
										autoplay
										muted
										playsinline
										ref="secondChannelVideo"
										class="preview-video"
										crossorigin="anonymous"
									></video>
								</div>
							</div>
							<div class="channel channel-3">
								<div class="channel-logo">
									<span class="logo-text">–¢–ù–¢</span>
								</div>
								<div class="program-info">
									<div class="program-title">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</div>
								</div>
								<div class="channel-preview">
									<video
										autoplay
										muted
										playsinline
										ref="thirdChannelVideo"
										class="preview-video"
										crossorigin="anonymous"
									></video>
								</div>
							</div>
							<div class="channel channel-4">
								<div class="channel-logo">
									<span class="logo-text">–ú–ê–¢–ß! –ë–æ–µ—Ü</span>
								</div>
								<div class="program-info">
									<div class="program-title">–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä</div>
								</div>
								<div class="channel-preview">
									<video
										autoplay
										muted
										playsinline
										ref="fourthChannelVideo"
										class="preview-video"
										crossorigin="anonymous"
									></video>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="section features-section">
			<h2 class="section-title">–û—Ç–∫—Ä–æ–π—Ç–µ –º–∏—Ä —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏—è</h2>
			<p class="section-subtitle">
				–ë–æ–≥–∞—Ç—ã–π –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–æ–≤ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤–∞—à–µ–≥–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ
				–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
			</p>

			<div class="advantages">
				<div class="advantage-card">
					<div class="advantage-icon">üì∫</div>
					<h3>–û–±—à–∏—Ä–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –∫–∞–Ω–∞–ª–æ–≤</h3>
					<p>
						–ë–æ–ª–µ–µ 150 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Ç–µ–ª–µ–∫–∞–Ω–∞–ª–æ–≤ –≤ –æ—Ç–ª–∏—á–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ,
						–≤–∫–ª—é—á–∞—è —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ, —Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ, –ø–æ–∑–Ω–∞–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∏
						–¥–µ—Ç—Å–∫–∏–µ.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üåê</div>
					<h3>–î–æ—Å—Ç—É–ø –±–µ–∑ –≥—Ä–∞–Ω–∏—Ü</h3>
					<p>
						–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–æ—Å—Å–∏–π—Å–∫–æ–µ –¢–í –∏–∑ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω—ã –º–∏—Ä–∞ –±–µ–∑ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö
						–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ù–∞—à–∏ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–∞–∂–µ
						–≤ —Å—Ç—Ä–∞–Ω–∞—Ö —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üì±</div>
					<h3>–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å</h3>
					<p>
						–°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ: –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ, –ø–ª–∞–Ω—à–µ—Ç–µ –∏–ª–∏
						Smart TV. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞
						—ç–∫—Ä–∞–Ω–µ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">‚ö°</div>
					<h3>–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h3>
					<p>
						–ù–∞—à–∏ —Å–µ—Ä–≤–µ—Ä—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤—ã—Å–æ–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–π
						–±–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–∏. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–∞ –ø–æ–¥ –≤–∞—à–µ
						–∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üîÑ</div>
					<h3>–ê—Ä—Ö–∏–≤ –ø–µ—Ä–µ–¥–∞—á</h3>
					<p>
						–ü—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –ª—é–±–∏–º—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É? –ù–µ –±–µ–¥–∞! –° —Ñ—É–Ω–∫—Ü–∏–µ–π –∞—Ä—Ö–∏–≤–∞ –≤—ã –º–æ–∂–µ—Ç–µ
						–ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª—é–±—É—é –ø–µ—Ä–µ–¥–∞—á—É, –≤—ã—à–µ–¥—à—É—é –≤ —ç—Ñ–∏—Ä –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üîç</div>
					<h3>–£–¥–æ–±–Ω—ã–π –ø–æ–∏—Å–∫</h3>
					<p>
						–ë—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å –ø–æ–º–æ—â—å—é
						–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å
						—Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üîí</div>
					<h3>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
					<p>
						–ó–∞—â–∏—â–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ú—ã
						–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–µ —Ö—Ä–∞–Ω–∏–º –≤–∞—à—É –ª–∏—á–Ω—É—é
						–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
					</p>
				</div>

				<div class="advantage-card">
					<div class="advantage-icon">üí∞</div>
					<h3>–í—ã–≥–æ–¥–Ω–∞—è —Ü–µ–Ω–∞</h3>
					<p>
						–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏. –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞
						–æ–ø–ª–∞—Ç—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–ª—è –≤–∞—Å –≤–∞—Ä–∏–∞–Ω—Ç: –æ—Ç –º–µ—Å—è—á–Ω–æ–π –¥–æ
						–≥–æ–¥–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏.
					</p>
				</div>
			</div>
		</div>

		<div class="section how-it-works">
			<h2 class="section-title">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h2>
			<div class="steps">
				<div class="step">
					<div class="step-number">1</div>
					<h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
					<p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤—Å–µ–≥–æ –∑–∞ 30 —Å–µ–∫—É–Ω–¥, —É–∫–∞–∑–∞–≤ —Ç–æ–ª—å–∫–æ –≤–∞—à email</p>
				</div>
				<div class="step-arrow">‚Üí</div>
				<div class="step">
					<div class="step-number">2</div>
					<h3>–ê–∫—Ç–∏–≤–∞—Ü–∏—è</h3>
					<p>–ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π 7-–¥–Ω–µ–≤–Ω–æ–π –ø—Ä–æ–±–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–µ</p>
				</div>
				<div class="step-arrow">‚Üí</div>
				<div class="step">
					<div class="step-number">3</div>
					<h3>–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å</h3>
					<p>–°–º–æ—Ç—Ä–∏—Ç–µ –ª—é–±–∏–º—ã–µ –∫–∞–Ω–∞–ª—ã –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</p>
				</div>
			</div>
		</div>

		<div class="section testimonials">
			<h2 class="section-title">–ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –Ω–∞—à–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h2>
			<div class="testimonial-grid">
				<div class="testimonial">
					<div class="quote">
						"–õ—É—á—à–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –¢–í –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π. –ò—Å–ø–æ–ª—å–∑—É—é
						—É–∂–µ –≥–æ–¥, –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç–µ!"
					</div>
					<div class="author">–ê–Ω–Ω–∞ –ö., –ë–µ—Ä–ª–∏–Ω</div>
				</div>
				<div class="testimonial">
					<div class="quote">
						"–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –º–æ–≥—É —Å–º–æ—Ç—Ä–µ—Ç—å –ª—é–±–∏–º—ã–µ –ø–µ—Ä–µ–¥–∞—á–∏ –≤ —Ö–æ—Ä–æ—à–µ–º –∫–∞—á–µ—Å—Ç–≤–µ.
						–û–≥—Ä–æ–º–Ω—ã–π –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–æ–≤ –∏ –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å."
					</div>
					<div class="author">–ú–∏—Ö–∞–∏–ª –î., –ù—å—é-–ô–æ—Ä–∫</div>
				</div>
				<div class="testimonial">
					<div class="quote">
						"–ü—Ä–æ–±–æ–≤–∞–ª –º–Ω–æ–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã, –Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –Ω–∞ RusTV. –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
						–±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π –∏ –æ—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤."
					</div>
					<div class="author">–°–µ—Ä–≥–µ–π –í., –¢–æ—Ä–æ–Ω—Ç–æ</div>
				</div>
			</div>
		</div>

		<div class="section cta-section">
			<h2>–ì–æ—Ç–æ–≤—ã –æ–∫—É–Ω—É—Ç—å—Å—è –≤ –º–∏—Ä —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏—è?</h2>
			<p>
				–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —Å–µ–π—á–∞—Å –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º –Ω–∞ 7
				–¥–Ω–µ–π –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ!
			</p>
			<router-link to="/register" class="try-free-btn"
				>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</router-link
			>
			<p class="no-obligation">–ë–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è</p>
		</div>
	</div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from 'vue'

const channelUrls = {
	pervyi: import.meta.env.VITE_PERVYI_URL,
	rossiya: import.meta.env.VITE_ROSSIYA_URL,
	tnt: import.meta.env.VITE_TNT_URL,
	match: import.meta.env.VITE_MATCH_URL,
}

const activeChannelIndex = ref(0)
const channelSwitchInterval = ref(null)

const hlsPlayers = ref([])

const getProxyUrl = url => {
	return `/api/playlist/stream?url=${encodeURIComponent(url)}`
}

const switchChannel = () => {
	const channels = document.querySelectorAll('.channel')

	channels.forEach(channel => {
		channel.classList.remove('active')
	})

	activeChannelIndex.value = (activeChannelIndex.value + 1) % channels.length

	const nextChannel = channels[activeChannelIndex.value]
	nextChannel.classList.add('active')

	refreshActiveChannelPlayback()
}

const refreshActiveChannelPlayback = async () => {
	try {
		destroyAllHlsInstances()

		const activeChannel = document.querySelector('.channel.active')
		if (!activeChannel) return

		const videoElement = activeChannel.querySelector('video')
		if (!videoElement) return

		let streamUrl = ''
		if (activeChannel.classList.contains('channel-1')) {
			streamUrl = channelUrls.pervyi
		} else if (activeChannel.classList.contains('channel-2')) {
			streamUrl = channelUrls.rossiya
		} else if (activeChannel.classList.contains('channel-3')) {
			streamUrl = channelUrls.tnt
		} else if (activeChannel.classList.contains('channel-4')) {
			streamUrl = channelUrls.match
		}

		if (!streamUrl) return

		await setupNewPlayer(videoElement, streamUrl)
	} catch (err) {
		console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', err)
	}
}

const setupNewPlayer = async (videoElement, streamUrl) => {
	try {
		const proxyUrl = getProxyUrl(streamUrl)

		videoElement.pause()
		videoElement.removeAttribute('src')
		videoElement.load()

		if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
			videoElement.src = proxyUrl
			await videoElement.play().catch(e => {
				console.error('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:', e)
				setTimeout(
					() =>
						videoElement
							.play()
							.catch(e => console.error('–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞:', e)),
					500
				)
			})
		} else {
			try {
				const Hls = (await import('hls.js')).default

				if (Hls.isSupported()) {
					const hls = new Hls({
						maxBufferLength: 30,
						maxMaxBufferLength: 60,
						enableWorker: true,
						lowLatencyMode: true,
						xhrSetup: xhr => {
							xhr.withCredentials = false
						},
					})

					hlsPlayers.value.push(hls)

					hls.loadSource(proxyUrl)
					hls.attachMedia(videoElement)

					hls.on(Hls.Events.MANIFEST_PARSED, () => {
						videoElement.play().catch(e => {
							console.error(
								'–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞:',
								e
							)
							setTimeout(
								() =>
									videoElement
										.play()
										.catch(e =>
											console.error('–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞:', e)
										),
								500
							)
						})
					})

					hls.on(Hls.Events.ERROR, (event, data) => {
						if (data.fatal) {
							console.error('–§–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ HLS:', data.type, data.details)
							switch (data.type) {
								case Hls.ErrorTypes.NETWORK_ERROR:
									console.log(
										'–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞, –ø—Ä–æ–±—É–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...'
									)
									hls.startLoad()
									break
								case Hls.ErrorTypes.MEDIA_ERROR:
									console.log('–û—à–∏–±–∫–∞ –º–µ–¥–∏–∞, –ø—Ä–æ–±—É–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å...')
									hls.recoverMediaError()
									break
								default:
									console.error(
										'–ù–µ—É—Å—Ç—Ä–∞–Ω–∏–º–∞—è –æ—à–∏–±–∫–∞, —É–Ω–∏—á—Ç–æ–∂–∞–µ–º –∏–Ω—Å—Ç–∞–Ω—Å:',
										data
									)
									hls.destroy()
									setTimeout(
										() => setupNewPlayer(videoElement, streamUrl),
										1000
									)
									break
							}
						}
					})
				} else {
					console.error('HLS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ')
					videoElement.src = proxyUrl
					videoElement
						.play()
						.catch(e => console.error('–û—à–∏–±–∫–∞ –ø—Ä—è–º–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', e))
				}
			} catch (err) {
				console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ hls.js:', err)
				videoElement.src = proxyUrl
				videoElement
					.play()
					.catch(e => console.error('–û—à–∏–±–∫–∞ –ø—Ä—è–º–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', e))
			}
		}
	} catch (err) {
		console.error('–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–µ–µ—Ä–∞:', err)
	}
}

const destroyAllHlsInstances = () => {
	hlsPlayers.value.forEach(hls => {
		try {
			hls.destroy()
		} catch (e) {
			console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ HLS –ø–ª–µ–µ—Ä–∞:', e)
		}
	})
	hlsPlayers.value = []
}

onMounted(() => {
	setTimeout(() => {
		try {
			document.querySelector('.channel-1').classList.add('active')

			refreshActiveChannelPlayback()

			channelSwitchInterval.value = setInterval(switchChannel, 5000)
		} catch (err) {
			console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:', err)
		}
	}, 1000)
})

onBeforeUnmount(() => {
	if (channelSwitchInterval.value) {
		clearInterval(channelSwitchInterval.value)
	}

	destroyAllHlsInstances()
})
</script>

<style scoped>
.welcome-page {
	max-width: 100%;
	overflow-x: hidden;
	background-color: #f9f9f9;
}

.hero-section {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: space-between;
	background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
	color: white;
	padding: 80px 20px;
	text-align: center;
}

@media (min-width: 992px) {
	.hero-section {
		flex-direction: row;
		text-align: left;
		padding: 100px 10%;
	}
}

.hero-content {
	max-width: 600px;
}

.hero-image {
	margin-top: 50px;
}

@media (min-width: 992px) {
	.hero-image {
		margin-top: 0;
	}
}

.tv-frame {
	width: 300px;
	height: 200px;
	background: #000;
	border-radius: 10px;
	padding: 10px;
	box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
	position: relative;
}

.tv-screen {
	width: 100%;
	height: 100%;
	background: #0a0a1a;
	overflow: hidden;
	position: relative;
}

.tv-content {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.channel-1,
.channel-2,
.channel-3,
.channel-4 {
	position: absolute;
	opacity: 0;
	width: 100%;
	height: 100%;
	background-color: #0a0a1a;
	padding: 5px;
	box-sizing: border-box;
	color: white;
	display: flex;
	flex-direction: column;
	transition: opacity 0.3s ease;
	visibility: hidden;
}

.channel.active {
	opacity: 1;
	visibility: visible;
}

.channel-logo {
	background: rgba(255, 255, 255, 0.1);
	padding: 3px 8px;
	border-radius: 4px;
	display: inline-block;
	margin-bottom: 4px;
	align-self: flex-start;
}

.logo-text {
	font-weight: bold;
	font-size: 12px;
	text-transform: uppercase;
}

.program-info {
	margin-bottom: 4px;
	text-align: left;
}

.program-title {
	font-weight: bold;
	font-size: 12px;
}

.channel-preview {
	flex-grow: 1;
	border-radius: 2px;
	overflow: hidden;
	position: relative;
	background-color: #000;
}

.preview-video {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

h1 {
	font-size: 2.8rem;
	margin-bottom: 1rem;
	font-weight: 700;
	line-height: 1.2;
	text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.subtitle {
	font-size: 1.3rem;
	margin-bottom: 2.5rem;
	line-height: 1.5;
	opacity: 0.9;
}

.hero-cta {
	display: inline-block;
	background-color: #4caf50;
	color: white;
	font-size: 1.2rem;
	font-weight: 600;
	padding: 15px 40px;
	border-radius: 50px;
	text-decoration: none;
	transition: all 0.3s;
	box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
}

.hero-cta:hover {
	background-color: #3d9140;
	transform: translateY(-3px);
	box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
}

.trial-note {
	margin-top: 15px;
	font-size: 0.9rem;
	opacity: 0.8;
}

.section {
	padding: 80px 20px;
}

.section-title {
	text-align: center;
	font-size: 2.2rem;
	margin-bottom: 15px;
	color: #2c3e50;
}

.section-subtitle {
	text-align: center;
	font-size: 1.2rem;
	color: #5a6a7a;
	max-width: 700px;
	margin: 0 auto 50px;
}

.features-section {
	background-color: white;
}

.advantages {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
	gap: 40px;
	max-width: 1200px;
	margin: 0 auto;
}

.advantage-card {
	background: #fff;
	border-radius: 12px;
	padding: 30px;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
	transition: transform 0.3s, box-shadow 0.3s;
	border: 1px solid #f0f0f0;
}

.advantage-card:hover {
	transform: translateY(-10px);
	box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
}

.advantage-icon {
	font-size: 3rem;
	margin-bottom: 20px;
}

.advantage-card h3 {
	color: #2c3e50;
	margin-bottom: 15px;
	font-size: 1.3rem;
}

.advantage-card p {
	color: #5a6a7a;
	line-height: 1.6;
}

.how-it-works {
	background-color: #f1f5f9;
}

.steps {
	display: flex;
	flex-direction: column;
	align-items: center;
	max-width: 1000px;
	margin: 0 auto;
}

@media (min-width: 768px) {
	.steps {
		flex-direction: row;
		justify-content: space-between;
	}
}

.step {
	background: white;
	padding: 30px;
	border-radius: 12px;
	text-align: center;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
	margin-bottom: 30px;
	width: 100%;
	max-width: 250px;
}

@media (min-width: 768px) {
	.step {
		margin-bottom: 0;
	}
}

.step-number {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 50px;
	height: 50px;
	background: #4caf50;
	color: white;
	border-radius: 50%;
	font-size: 1.5rem;
	font-weight: 700;
	margin: 0 auto 20px;
}

.step h3 {
	color: #2c3e50;
	margin-bottom: 10px;
}

.step-arrow {
	display: none;
	color: #4caf50;
	font-size: 2rem;
	font-weight: 700;
}

@media (min-width: 768px) {
	.step-arrow {
		display: block;
	}
}

.testimonials {
	background: linear-gradient(135deg, #f5f7fa, #e4e7eb);
}

.testimonial-grid {
	display: grid;
	grid-template-columns: 1fr;
	gap: 30px;
	max-width: 1200px;
	margin: 0 auto;
}

@media (min-width: 768px) {
	.testimonial-grid {
		grid-template-columns: repeat(3, 1fr);
	}
}

.testimonial {
	background: white;
	padding: 30px;
	border-radius: 12px;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.quote {
	font-style: italic;
	line-height: 1.6;
	color: #2c3e50;
	margin-bottom: 15px;
	position: relative;
	padding: 0 10px;
}

.quote::before,
.quote::after {
	content: '"';
	font-size: 2rem;
	color: #4caf50;
	position: absolute;
	opacity: 0.3;
}

.quote::before {
	left: -10px;
	top: -10px;
}

.quote::after {
	right: -10px;
	bottom: -30px;
}

.author {
	text-align: right;
	font-weight: 700;
	color: #5a6a7a;
}

.cta-section {
	text-align: center;
	background: #2c3e50;
	color: white;
	padding: 80px 20px;
	border-radius: 0;
}

.cta-section h2 {
	font-size: 2.2rem;
	margin-bottom: 20px;
	color: white;
}

.cta-section p {
	color: rgba(255, 255, 255, 0.8);
	margin-bottom: 30px;
	font-size: 1.2rem;
	max-width: 700px;
	margin-left: auto;
	margin-right: auto;
}

.try-free-btn {
	display: inline-block;
	background-color: #4caf50;
	color: white;
	font-size: 1.2rem;
	font-weight: 600;
	padding: 15px 40px;
	border-radius: 50px;
	text-decoration: none;
	transition: all 0.3s;
	box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
}

.try-free-btn:hover {
	background-color: #3d9140;
	transform: translateY(-3px);
	box-shadow: 0 6px 20px rgba(76, 175, 80, 0.6);
}

.no-obligation {
	font-size: 0.9rem;
	opacity: 0.7;
	margin-top: 15px;
}

@media (min-width: 992px) {
	.tv-frame {
		width: 400px;
		height: 280px;
	}
}
</style>
